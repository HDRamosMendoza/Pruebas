{"version":3,"sources":["../../../widgets/InfoSummary2/VersionManager.js"],"names":["define","BaseVersionManager","VersionManager","versions","version","upgrader","oldConfig","countEnabled","tc","tc2","mainPanelIcon","toString","replace","lyrInfos","layerInfos","i","length","oldM","newM","li","imageData","panelImageData","indexOf","symbolData","displayFeatureCount","_highLightColor","featureDisplayOptions","groupEnabled","fields","groupField","name","label","clusterType","clusterSymbol","color","outline","width","type","style","s","panelHTML","svg","newConfig","upgradeFields","prototype","constructor"],"mappings":"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","file":"VersionManager.js","sourcesContent":["define(['jimu/shared/BaseVersionManager'], function (BaseVersionManager) {\n\n  function VersionManager() {\n    this.versions = [{\n      version: '1.3',\n      upgrader: function upgrader(oldConfig) {\n        return oldConfig;\n      }\n    }, {\n      version: '1.4',\n      upgrader: function upgrader(oldConfig) {\n        return oldConfig;\n      }\n    }, {\n      version: '2.0Beta',\n      upgrader: function upgrader(oldConfig) {\n        return oldConfig;\n      }\n    }, {\n      version: '2.0',\n      upgrader: function upgrader(oldConfig) {\n        return oldConfig;\n      }\n    }, {\n      version: '2.0.1',\n      upgrader: function upgrader(oldConfig) {\n        return oldConfig;\n      }\n    }, {\n      version: '2.1',\n      upgrader: function upgrader(oldConfig) {\n        oldConfig.countEnabled = true;\n\n        var tc;\n        var tc2;\n\n        var mainPanelIcon = oldConfig.mainPanelIcon.toString();\n        mainPanelIcon = mainPanelIcon.replace('><img', '');\n        mainPanelIcon = mainPanelIcon.replace('src=\\\"', 'style=\\\"background-image:url(');\n        mainPanelIcon = mainPanelIcon.replace('\\\" title=\\\"', ');\\\" title=\\\"');\n        oldConfig.mainPanelIcon = mainPanelIcon;\n        var lyrInfos = oldConfig.layerInfos;\n        if (lyrInfos) {\n          for (var i = 0; i < lyrInfos.length; i++) {\n            var oldM;\n            var newM;\n            var li = lyrInfos[i];\n            if (li.imageData) {\n              var imageData = '<div class=\\\"imageDataGFX\\\">' + li.imageData + '</div>';\n              imageData = imageData.replace('width=\\\"18\\\" height=\\\"18\\\"', 'width=\\\"28\\\" height=\\\"28\\\"');\n              imageData = imageData.replace('width=\\\"18\\\" height=\\\"18\\\"', 'width=\\\"28\\\" height=\\\"28\\\"');\n              imageData = imageData.replace('x=\\\"-9\\\" y=\\\"-9\\\"', 'x=\\\"-14\\\" y=\\\"-14\\\"');\n              oldM = 'matrix(1.00000000,0.00000000,0.00000000,1.00000000,9.00000000,9.00000000)';\n              newM = 'matrix(1.00000000,0.00000000,0.00000000,1.00000000,14.00000000,14.00000000)';\n              li.imageData = imageData.replace(oldM, newM);\n            }\n            if (li.panelImageData) {\n              var panelImageData = li.panelImageData;\n              if (panelImageData.indexOf('<img') > -1) {\n                panelImageData = panelImageData.replace('class=\\\"', 'style=\\\"width:44px; height:44px;\\\" class=\\\"');\n              } else {\n                panelImageData = panelImageData.replace('width=\\\"35\\\" height=\\\"35\\\"', 'width=\\\"44\\\" height=\\\"44\\\"');\n                panelImageData = panelImageData.replace('width=\\\"35\\\" height=\\\"35\\\"', 'width=\\\"44\\\" height=\\\"44\\\"');\n                panelImageData = panelImageData.replace('x=\\\"-18\\\" y=\\\"-18\\\"', 'x=\\\"-22\\\" y=\\\"-22\\\"');\n                oldM = 'matrix(1.00000000,0.00000000,0.00000000,1.00000000,17.50000000,17.50000000)';\n                newM = 'matrix(1.00000000,0.00000000,0.00000000,1.00000000,22.00000000,22.00000000)';\n                panelImageData = panelImageData.replace(oldM, newM);\n              }\n              li.panelImageData = panelImageData;\n            }\n            if (li.symbolData) {\n              var symbolData = li.symbolData;\n              symbolData.displayFeatureCount = false;\n              symbolData._highLightColor = '#ffffff';\n              symbolData.featureDisplayOptions = {\n                groupEnabled: false,\n                fields: [],\n                groupField: { name: \"\", label: \"\" }\n              };\n\n              if (symbolData.clusterType !== 'ThemeCluster') {\n                tc = symbolData.clusterSymbol;\n                tc2 = symbolData.clusterType;\n              }\n\n              if (symbolData.clusterType === 'ThemeCluster') {\n                if (tc) {\n                  symbolData.clusterType = tc2;\n                  symbolData.clusterSymbol = tc;\n                } else {\n                  //symbolData.clusterType = 'CustomCluster';\n                  symbolData.clusterSymbol = {\n                    color: [155, 187, 89, 128],\n                    outline: {\n                      color: [115, 140, 61, 255],\n                      width: 1.5,\n                      type: \"esriSLS\",\n                      style: \"esriSLSSolid\"\n                    },\n                    type: \"esriSFS\",\n                    style: \"esriSFSSolid\"\n                  };\n                }\n              }\n\n              if (symbolData.s) {\n                var panelHTML = symbolData.s;\n                if (panelHTML.indexOf('width=\\\"26\\\" height=\\\"26\\\"') > -1) {\n                  panelHTML = panelHTML.replace('width=\\\"26\\\" height=\\\"26\\\"', 'width=\\\"44\\\" height=\\\"44\\\"');\n                  panelHTML = panelHTML.replace('width=\\\"26\\\" height=\\\"26\\\"', 'width=\\\"44\\\" height=\\\"44\\\"');\n                  panelHTML = panelHTML.replace('x=\\\"-13\\\" y=\\\"-13\\\"', 'x=\\\"-22\\\" y=\\\"-22\\\"');\n                  oldM = 'matrix(1.00000000,0.00000000,0.00000000,1.00000000,13.00000000,13.00000000)';\n                  newM = 'matrix(1.00000000,0.00000000,0.00000000,1.00000000,22.00000000,22.00000000)';\n                  panelHTML = panelHTML.replace(oldM, newM);\n                  panelHTML = panelHTML.replace(oldM, newM);\n                } else if (panelHTML.indexOf('data:image' > -1)) {\n                  var svg = '<svg overflow=\\\"hidden\\\" width=\\\"44\\\" height=\\\"44\\\"><defs></defs>';\n                  svg += '<image fill-opacity=\\\"0\\\" stroke=\\\"none\\\" ';\n                  svg += 'stroke-opacity=\\\"0\\\" stroke-width=\\\"1\\\" stroke-linecap=\\\"butt\\\" ';\n                  svg += 'stroke-linejoin=\\\"miter\\\" stroke-miterlimit=\\\"4\\\" ';\n                  svg += 'x=\\\"-22\\\" y=\\\"-22\\\" width=\\\"44\\\" height=\\\"44\\\"';\n                  svg += 'preserveAspectRatio=\\\"none\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" ';\n                  svg += 'xlink:href=\\\"';\n                  svg += panelHTML;\n                  svg += '\\\" transform=\\\"';\n                  svg += 'matrix(1.00000000,0.00000000,0.00000000,1.00000000,22.00000000,22.00000000)\\\">';\n                  svg += '</image></svg>';\n                }\n                symbolData.panelHTML = panelHTML;\n              }\n              li.symbolData = symbolData;\n            }\n            lyrInfos[i] = li;\n          }\n        }\n        return oldConfig;\n      }\n    }, {\n      version: '2.2',\n      upgrader: function upgrader(oldConfig) {\n        return oldConfig;\n      }\n    }, {\n      version: '2.3',\n      upgrader: function upgrader(oldConfig) {\n        return oldConfig;\n      }\n    }, {\n      version: '2.4',\n      upgrader: function upgrader(oldConfig) {\n        return oldConfig;\n      }\n    }, {\n      version: '2.5',\n      upgrader: function upgrader(oldConfig) {\n        var newConfig = oldConfig;\n        newConfig.upgradeFields = true;\n        return newConfig;\n      }\n    }];\n  }\n\n  VersionManager.prototype = new BaseVersionManager();\n  VersionManager.prototype.constructor = VersionManager;\n  return VersionManager;\n});\n//# sourceMappingURL=VersionManager.js.map\n"]}