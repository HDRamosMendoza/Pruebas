{"version":3,"sources":["../../../widgets/Widget-ConsultaProyecto/Widget.js"],"names":["define","query","_WidgetsInTemplateMixin","_TemplatedMixin","Query","lang","LayerInfos","declare","Message","BaseWidget","baseClass","layersMap","feature_class","projectFilter","counterFeature","counterTotal","counterItem","counterResults","stateExtent","layerExtent","listLayers","idGroupLayer","booleanField","listName","colorRowSelected","_loadNoneGeneralLimite","LoadGeneral","style","display","ID_General","error","console","name","message","_counterFunction","paramNumber","ID_ListProject","childNodes","click","map","setExtent","expand","ID_LoadProyecto","_getPanel","paramWidget","paramHeight","panel","pos","getPanel","position","domNode","padding","width","height","setPosition","_onClickCheckbox","thisValue","event","target","checkboxes","document","getElementsByName","forEach","item","checked","id","ID_ProyectoFiltro","setAttribute","focus","_searchProyectos","paramNameProject","paramProjectFilter","listNameJSON","layerMap","attObjectId","featureAttributes","featuresLength","feature","field","li","div","k","featureLayerDecretoVisor","getLayer","where","toUpperCase","idLayer","itemLayer","getLayerInfoById","hide","layerObject","queryExtent","queryCount","queryResults","ID_ProyectoCounter","innerHTML","bind","queryFeatures","results","features","length","fields","H","alias","window","listFiledJSON","D","fragment","createDocumentFragment","attributes","createElement","createAttribute","value","objectid","attLayerId","setAttributeNode","className","appendChild","_layer","setFilter","show","count","extent","union","layerInfos","_isNumeric","isNaN","parseFloat","isFinite","_onClickProyectoBuscar","countCheckbox","proyectoFiltro","trim","titleLabel","getAttribute","_activeTabSearch","_onClickProyectoLimpiar","_initialExtent","_clearNodes","parentNode","i","nodeName","log","_queryResultsFeatures","layerid","queryProject","infoWindow","setFeatures","geometry","centerAndZoom","_onclickRowSelected","on","e","dataset","_getAllLayers","getInstance","itemInfo","then","hitch","layerInfosObj","positionTab","tabs4","querySelectorAll","tabsContent4","deactvateAllTabs","tab","classList","remove","hideTabsContent","tabContent","activateTabsContent","getIndex","add","el","parentElement","children","indexOf","currentValue","index","array","addEventListener","_onFocus","postCreate","inherited","arguments","config","listNameField","startup"],"mappings":";;AAAAA,OAAO,CACH,YADG,EAEH,+BAFG,EAGH,uBAHG,EAIH,kBAJG,EAKH,iBALG,EAMH,4BANG,EAOH,oBAPG,EAQH,oBARG,EASH,iBATG,CAAP,EAUA,UACIC,KADJ,EAEIC,uBAFJ,EAGIC,eAHJ,EAIIC,KAJJ,EAKIC,IALJ,EAMIC,UANJ,EAOIC,OAPJ,EAQIC,OARJ,EASIC,UATJ,EASgB;AACZ;AACF,WAAOF,QAAQ,CAACE,UAAD,EAAYP,uBAAZ,CAAR,EAA8C;AACnD;AACAQ,mBAAW,0BAFwC;AAGnDC,mBAAW,IAHwC;AAInDC,uBAAe,IAJoC;AAKnDC,uBAAe,IALoC;AAMnD;AACA;AACA;AACAC,wBAAgB,CATmC;AAUnDC,sBAAc,CAVqC;AAWnDC,qBAAa,CAXsC;AAYnDC,wBAAgB,CAZmC;AAanDC,qBAAa,EAbsC;AAcnDC,qBAAa,IAdsC;AAenDC,oBAAY,IAfuC;AAgBnDC,sBAAc,IAhBqC;AAiBnDC,sBAAc,IAjBqC;AAkBnDC,kBAAU,IAlByC;AAmBnDC,0BAAkB,IAnBiC;;AAqBnDC,gCAAwB,kCAAU;AAC9B,gBAAI;AACA,qBAAKC,WAAL,CAAiBC,KAAjB,CAAuBC,OAAvB,GAAiC,MAAjC;AACA,qBAAKC,UAAL,CAAgBF,KAAhB,CAAsBC,OAAtB,GAAgC,OAAhC;AACH,aAHD,CAGE,OAAOE,KAAP,EAAc;AACZC,wBAAQD,KAAR,oCAA+CA,MAAME,IAArD,WAA+DF,MAAMG,OAArE;AACH;AACJ,SA5BkD;AA6BnD;AACAC,0BAAkB,0BAASC,WAAT,EAAsB;AACpC,gBAAI;AACA,oBAAGA,eAAe,IAAlB,EAAwB;AACpB,yBAAKnB,WAAL,GAAmB,KAAKA,WAAL,GAAmBmB,WAAtC;AACA,wBAAG,KAAKnB,WAAL,IAAoB,KAAKD,YAA5B,EAA0C;AACtC;AACA,4BAAG,KAAKI,WAAL,IAAoB,IAAvB,EAA6B;AACzB,gCAAG,KAAKF,cAAL,IAAuB,CAA1B,EAA6B;AACzB;AACA,qCAAKmB,cAAL,CAAoBC,UAApB,CAA+B,CAA/B,EAAkCC,KAAlC;AACA;AAEH,6BALD,MAKO;AACH,qCAAKC,GAAL,CAASC,SAAT,CAAmB,KAAKrB,WAAL,CAAiBsB,MAAjB,CAAwB,CAAxB,CAAnB,EAA8C,IAA9C;AACH;AACJ,yBATD,MASO;AACH,iCAAKC,eAAL,CAAqBf,KAArB,CAA2BC,OAA3B,GAAqC,MAArC;AACH;AACD;AACA,6BAAKM,gBAAL,CAAsB,IAAtB;AACH;AACJ,iBAnBD,MAmBO;AACH,yBAAKjB,cAAL,GAAsB,CAAtB;AACA,yBAAKD,WAAL,GAAmB,CAAnB;AACA,yBAAKD,YAAL,GAAoB,CAApB;AACA,yBAAKI,WAAL,GAAmB,IAAnB;AACH;AACJ,aA1BD,CA0BE,OAAOW,KAAP,EAAc;AACZC,wBAAQD,KAAR,8BAAyCA,MAAME,IAA/C,WAAyDF,MAAMG,OAA/D;AACH;AACJ,SA5DkD;AA6DnD;AACAU,mBAAW,mBAASC,WAAT,EAAsBC,WAAtB,EAAmC;AAC1C,gBAAIC,QAAQ,IAAZ;AAAA,gBAAkBC,MAAM,IAAxB;AACA,gBAAI;AACA;AACAD,wBAAQ,KAAKE,QAAL,EAAR;AACAD,sBAAMD,MAAMG,QAAZ;AACAH,sBAAMI,OAAN,CAAcb,UAAd,CAAyB,CAAzB,EAA4BA,UAA5B,CAAuC,CAAvC,EAA0CV,KAA1C,CAAgDwB,OAAhD,GAA0D,KAA1D;AACAJ,oBAAIK,KAAJ,GAAYR,WAAZ;AACAG,oBAAIM,MAAJ,GAAaR,WAAb;AACAC,sBAAMQ,WAAN,CAAkBP,GAAlB;AACH,aARD,CAQE,OAAOjB,KAAP,EAAc;AACZC,wBAAQD,KAAR,iBAA4BA,MAAME,IAAlC,WAA4CF,MAAMG,OAAlD;AACH;AACJ,SA3EkD;AA4EnD;AACAsB,0BAAkB,4BAAW;AACzB,gBAAIC,YAAY,EAAhB;AACA,gBAAI;AACAA,4BAAYC,MAAMC,MAAlB;AACA,oBAAIC,aAAaC,SAASC,iBAAT,CAA2B,OAA3B,CAAjB;AACAF,2BAAWG,OAAX,CAAmB,UAACC,IAAD,EAAU;AACzB,wBAAIA,SAASP,SAAb,EAAwBO,KAAKC,OAAL,GAAe,KAAf;AAC3B,iBAFD;AAGA,oBAAGR,UAAUS,EAAV,IAAgB,mBAAnB,EAAwC;AACpC,yBAAKC,iBAAL,CAAuBC,YAAvB;AACA,yBAAKtD,aAAL,GAAqB,IAArB;AACH,iBAHD,MAGO;AACH,yBAAKqD,iBAAL,CAAuBC,YAAvB;AACA,yBAAKtD,aAAL,GAAqB,KAArB;AACH;AACD,qBAAKqD,iBAAL,CAAuBE,KAAvB;AACH,aAdD,CAcE,OAAOtC,KAAP,EAAc;AACZC,wBAAQD,KAAR,wBAAmCA,MAAME,IAAzC,WAAmDF,MAAMG,OAAzD;AACH;AACJ,SAhGkD;AAiGnD;AACAoC,0BAAkB,0BAASC,gBAAT,EAA0BC,kBAA1B,EAA8C;AAAA;;AAC5D,gBAAIC,eAAe,EAAnB;AAAA,gBAAuBvE,QAAQ,IAA/B;AAAA,gBAAqCwE,WAAW,EAAhD;AAAA,gBAAoDC,cAAc,IAAlE;AAAA,gBAAwEC,0BAAxE;AACA,gBAAIC,iBAAiB,IAArB;AAAA,gBAA2BC,UAAU,IAArC;AAAA,gBAA2CC,QAAQ,IAAnD;AAAA,gBAAyDC,KAAK,IAA9D;AAAA,gBAAoEC,MAAM,IAA1E;AACA,gBAAI;AACA,qBAAI,IAAIC,CAAR,IAAa,KAAK1D,QAAlB,EAA4B;AACxBiD,iCAAa,KAAKjD,QAAL,CAAc0D,CAAd,CAAb,IAAiC,KAAK1D,QAAL,CAAc0D,CAAd,CAAjC;AACH;AACD;AACAhF,wBAAQ,IAAIG,KAAJ,EAAR;AACAqE,2BAAW,KAAK9D,SAAhB;AACA;AACA,oBAAIuE,2BAA2B,KAAK3C,GAAL,CAAS4C,QAAT,CAAkB,KAAK9D,YAAvB,CAA/B;AACA,oBAAIkD,kBAAJ,EAAwB;AACpBtE,0BAAMmF,KAAN,iCAAyCd,iBAAiBe,WAAjB,EAAzC;AACH,iBAFD,MAEO;AACHpF,0BAAMmF,KAAN,kBAA2Bd,gBAA3B,uBAA6DA,gBAA7D;AACH;;AAbD;AAgBI,wBAAIgB,UAAa,MAAKjE,YAAlB,SAAkCkE,SAAtC;AACA,0BAAK3E,aAAL,GAAqB6D,SAASe,gBAAT,CAA6B,MAAKnE,YAAlC,SAAkDkE,SAAlD,CAArB;AACA;AACA,0BAAK3E,aAAL,CAAmB6E,IAAnB;AACA,0BAAK3E,cAAL,GAAsB,CAAtB;AACA;AACA,wBAAG,OAAO,MAAKF,aAAL,CAAmB8E,WAAnB,CAA+BC,WAAtC,KAAsD,UAAzD,EAAqE;AACjE;AACA,8BAAK/E,aAAL,CAAmB8E,WAAnB,CAA+BE,UAA/B,CAA0C3F,KAA1C,EAAgD,UAAS4F,YAAT,EAAuB;AACnE,iCAAK5E,cAAL,GAAsB,KAAKA,cAAL,GAAsB4E,YAA5C;AACA,iCAAK/E,cAAL,GAAsB,KAAKA,cAAL,GAAsB+E,YAA5C;AACA,iCAAKC,kBAAL,CAAwBC,SAAxB,GAAoC,KAAKjF,cAAzC;AACH,yBAJ+C,CAI9CkF,IAJ8C,CAIzC,KAJyC,CAAhD,EAIc,UAASlE,KAAT,EAAgB;AAAEC,oCAAQD,KAAR,CAAcA,KAAd;AAAuB,yBAJvD;AAKA,8BAAKf,YAAL;AACH;AACD;AACA,wBAAG,OAAO,MAAKH,aAAL,CAAmB8E,WAAnB,CAA+BC,WAAtC,KAAsD,UAAzD,EAAqE;AACjE;AACA;AACA,8BAAK/E,aAAL,CAAmB8E,WAAnB,CAA+BO,aAA/B,CAA6ChG,KAA7C,EAAoD,UAASiG,OAAT,EAAkB;AAClEtB,6CAAiBsB,QAAQC,QAAR,CAAiBC,MAAlC;AACA,gCAAGxB,kBAAkB,CAArB,EAAwB;AACpBC,0CAAUqB,QAAQC,QAAlB;AACA,oCAAG,KAAK7E,YAAR,EAAsB;AAClBwD,4CAAQoB,QAAQG,MAAhB;AACA,yCAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAIxB,MAAMsB,MAAzB,EAAiCE,GAAjC,EAAsC;AAClC,4CAAGxB,MAAMwB,CAAN,EAAStE,IAAT,IAAiBwC,YAApB,EAAkC;AAC9B;AACAA,yDAAaM,MAAMwB,CAAN,EAAStE,IAAtB,IAA8B8C,MAAMwB,CAAN,EAASC,KAAvC;AACAC,mDAAOC,aAAP,GAAuBjC,YAAvB;AACH;AACJ;AACD,yCAAKlD,YAAL,GAAoB,KAApB;AACH;;AAED,qCAAI,IAAIoF,IAAI,CAAZ,EAAeA,IAAI9B,cAAnB,EAAmC8B,GAAnC,EAAwC;AACpC,wCAAIC,WAAW/C,SAASgD,sBAAT,EAAf;AACAjC,wDAAoBE,QAAQ6B,CAAR,EAAWG,UAA/B;AACA9B,yCAAKnB,SAASkD,aAAT,CAAuB,IAAvB,CAAL;AACApC,kDAAcd,SAASmD,eAAT,CAAyB,eAAzB,CAAd;AACArC,gDAAYsC,KAAZ,GAAoBnC,QAAQ6B,CAAR,EAAWG,UAAX,CAAsBI,QAA1C;AACAC,iDAActD,SAASmD,eAAT,CAAyB,cAAzB,CAAd;AACAG,+CAAWF,KAAX,GAAmB1B,OAAnB;AACAP,uCAAGoC,gBAAH,CAAoBzC,WAApB;AACAK,uCAAGoC,gBAAH,CAAoBD,UAApB;AACAnC,uCAAGqC,SAAH,GAAe,iBAAf;AACA,yCAAI,IAAIpF,IAAR,IAAgB,KAAKT,QAArB,EAA+B;AAC3ByD,8CAAMpB,SAASkD,aAAT,CAAuB,KAAvB,CAAN;AACA9B,4CAAIoC,SAAJ,cAAyBpF,IAAzB;AACAgD,4CAAIe,SAAJ,mDAA8DS,OAAOC,aAAP,CAAqB,KAAKlF,QAAL,CAAcS,IAAd,CAArB,CAA9D,oBAAsH2C,kBAAkB,KAAKpD,QAAL,CAAcS,IAAd,CAAlB,CAAtH;AACD+C,2CAAGsC,WAAH,CAAerC,GAAf;AACF;AACD2B,6CAASU,WAAT,CAAqBtC,EAArB;AACA,yCAAK3C,cAAL,CAAoBiF,WAApB,CAAgCV,QAAhC;AACH;AACDlC,yCAASe,gBAAT,CAA0BU,QAAQC,QAAR,CAAiB,CAAjB,EAAoBmB,MAApB,CAA2BrD,EAArD,EAAyDsD,SAAzD,CAAmEtH,MAAMmF,KAAzE;AACAX,yCAASe,gBAAT,CAA0BU,QAAQC,QAAR,CAAiB,CAAjB,EAAoBmB,MAApB,CAA2BrD,EAArD,EAAyDuD,IAAzD;AACA;AACA,qCAAK9E,eAAL,CAAqBf,KAArB,CAA2BC,OAA3B,GAAqC,MAArC;AACH;AACJ,yBAzCmD,CAyClDoE,IAzCkD,CAyC7C,KAzC6C,CAApD;AA0CA;AACA,8BAAKpF,aAAL,CAAmB8E,WAAnB,CAA+BC,WAA/B,CAA2C1F,KAA3C,EAAiD,UAAS4F,YAAT,EAAuB;AACpE,gCAAGA,aAAa4B,KAAb,IAAsB,CAAzB,EAA4B;AACxB,oCAAG,KAAKtG,WAAL,IAAoB,IAAvB,EAA6B;AACzB,yCAAKA,WAAL,GAAmB0E,aAAa6B,MAAhC;AACH,iCAFD,MAEO;AACH,yCAAKvG,WAAL,CAAiBwG,KAAjB,CAAuB9B,aAAa6B,MAApC;AACH;AACJ;AACD,iCAAKxF,gBAAL,CAAsB,CAAtB;AACH,yBATgD,CAS/C8D,IAT+C,CAS1C,KAT0C,CAAjD;AAUH;AAxFL;;AAeA,qBAAIT,SAAJ,IAAiBL,yBAAyB0C,UAA1C,EAAsD;AAAA;AA0ErD;AACD;;;;;;;;;;;;;;;;;;;;AAsBA;;;;;;;;;;AAaA;;;;;;;;;;;AAWH,aAxID,CAwIE,OAAO9F,KAAP,EAAc;AACZC,wBAAQD,KAAR,uBAAkCA,MAAME,IAAxC,WAAkDF,MAAMG,OAAxD;AACH;AACJ,SAhPkD;;AAkPnD4F,kBAlPmD,sBAkPxCb,KAlPwC,EAkPjC;AACd,mBAAO,CAACc,MAAMC,WAAWf,KAAX,CAAN,CAAD,IAA6BgB,SAAShB,KAAT,CAApC;AACH,SApPkD;;;AAsPnDiB,gCAAwB,kCAAW;AAC/B,gBAAIC,gBAAgB,CAApB;AAAA,gBAAuBC,iBAAiB,EAAxC;AACA,gBAAI;AACAA,iCAAiB,KAAKjE,iBAAL,CAAuB8C,KAAvB,CAA6BoB,IAA7B,EAAjB;AACA;AACA,oBAAIzE,aAAaC,SAASC,iBAAT,CAA2B,OAA3B,CAAjB;AACAF,2BAAWG,OAAX,CAAmB,UAACC,IAAD,EAAU;AACzB,wBAAG,CAACA,KAAKC,OAAT,EAAkB;AAAEkE,wCAAgBA,gBAAe,CAA/B;AAAmC;AAC1D,iBAFD;AAGA;AACA,oBAAGA,iBAAiB,CAApB,EAAuB;AACnB,wBAAI1H,OAAJ,CAAY;AACR6H,2LADQ;AAIRpG;AAJQ,qBAAZ;AAOAiG,oCAAgB,CAAhB;AACA;AACH;AACD;AACA,oBAAGC,kBAAkB,EAArB,EAAyB;AACrB,wBAAI3H,OAAJ,CAAY;AACR6H,yLADQ;AAIRpG,qHACM,KAAKiC,iBAAL,CAAuBoE,YAAvB,CAAoC,aAApC,CADN;AAJQ,qBAAZ;AAOA;AACH;AACD;AACA,oBAAG,CAAC,KAAKzH,aAAT,EAAwB;AACpB;AACAsH,qCAAiB,KAAKN,UAAL,CAAgBM,cAAhB,IAAkCA,cAAlC,GAAkD,CAAnE;AACH;AACD;AACA,qBAAKI,gBAAL,CAAsB,CAAtB;AACA,qBAAK7F,eAAL,CAAqBf,KAArB,CAA2BC,OAA3B,GAAqC,OAArC;AACA;AACA,qBAAKQ,cAAL,CAAoB2D,SAApB,GAAgC,EAAhC;AACA;AACA;AACA;AACA,qBAAK1B,gBAAL,CAAsB8D,cAAtB,EAAsC,KAAKtH,aAA3C;AACH,aA5CD,CA4CE,OAAOiB,KAAP,EAAc;AACZC,wBAAQD,KAAR,oCAA+CA,MAAME,IAArD,WAA+DF,MAAMG,OAArE;AACH;AACJ,SAvSkD;;AAySnDuG,iCAAyB,mCAAW;AAChC,gBAAI;AACA,qBAAKtE,iBAAL,CAAuB8C,KAAvB,GAA+B,EAA/B;AACA,qBAAK5E,cAAL,CAAoB2D,SAApB,GAAgC,EAAhC;AACA,qBAAKD,kBAAL,CAAwBC,SAAxB,GAAoC,CAApC;AACA,qBAAK7B,iBAAL,CAAuBE,KAAvB;AACA;AACA,qBAAK7B,GAAL,CAASC,SAAT,CAAmB,KAAKD,GAAL,CAASkG,cAA5B;AACA;AACA,oBAAIvD,2BAA2B,KAAK3C,GAAL,CAAS4C,QAAT,CAAkB,KAAK9D,YAAvB,CAA/B;AACA,qBAAIkE,SAAJ,IAAiBL,yBAAyB0C,UAA1C,EAAsD;AAClD,yBAAKhH,aAAL,GAAqB,KAAKD,SAAL,CAAe6E,gBAAf,CAAmC,KAAKnE,YAAxC,SAAwDkE,SAAxD,CAArB;AACA,yBAAK3E,aAAL,CAAmB4G,IAAnB;AACA;AACA,wBAAG,OAAO,KAAK5G,aAAL,CAAmB8E,WAAnB,CAA+BC,WAAtC,KAAsD,UAAzD,EAAqE;AACjE;AACA,6BAAKhF,SAAL,CAAe6E,gBAAf,CAAmC,KAAKnE,YAAxC,SAAwDkE,SAAxD,EAAqEgC,SAArE,CAA+E,KAA/E;AACH;AACJ;AACJ,aAlBD,CAkBE,OAAOzF,KAAP,EAAc;AACZC,wBAAQD,KAAR,qCAAgDA,MAAME,IAAtD,WAAgEF,MAAMG,OAAtE;AACH;AACJ,SA/TkD;AAgUnDyG,qBAAa,qBAAS3E,IAAT,EAAe;AACxB,gBAAI;AACAA,uBAAOA,KAAK4E,UAAL,CAAgBtG,UAAvB;AACA,qBAAI,IAAIuG,IAAI,CAAZ,EAAeA,IAAE7E,KAAKqC,MAAtB,EAA8BwC,GAA9B,EAAmC;AAC/B,wBAAG7E,KAAK6E,CAAL,EAAQC,QAAR,IAAoB,IAAvB,EAA6B;AAC7B9E,6BAAK6E,CAAL,EAAQjH,KAAR,CAAc,kBAAd,IAAoC,SAApC;AACC;AACJ;AACJ,aAPD,CAOE,OAAOG,KAAP,EAAc;AACdC,wBAAQ+G,GAAR,yBAAkChH,MAAME,IAAxC,WAAkDF,MAAMG,OAAxD;AACD;AACF,SA3UgD;AA4UnD;AACA8G,6BA7UmD,iCA6U7B9B,QA7U6B,EA6UnB+B,OA7UmB,EA6UVtF,MA7UU,EA6UF;AAC7C,gBAAIuF,eAAe,IAAnB;AACA,gBAAI;AACAvF,uBAAO/B,KAAP,CAAa,kBAAb,IAAmC,KAAKH,gBAAxC;AACAyH,+BAAe,IAAI7I,KAAJ,EAAf;AACA6I,6BAAa7D,KAAb,mBAAmC6B,QAAnC;AACA,qBAAKtG,SAAL,CAAe6E,gBAAf,CAAgCwD,OAAhC,EACKtD,WADL,CACiBO,aADjB,CAC+BgD,YAD/B,EAC6C,UAAS/C,OAAT,EAAkB;AACvDtB,qCAAiBsB,QAAQC,QAAR,CAAiBC,MAAlC;AACA,wBAAGxB,kBAAkB,CAArB,EAAwB;AACpB,6BAAKrC,GAAL,CAAS2G,UAAT,CAAoBC,WAApB,CAAgCjD,QAAQC,QAAxC;AACA,6BAAK5D,GAAL,CAAS2G,UAAT,CAAoB1B,IAApB,CAAyBtB,QAAQC,QAAR,CAAiB,CAAjB,EAAoBiD,QAA7C;AACA,6BAAK7G,GAAL,CAAS8G,aAAT,CAAuBnD,QAAQC,QAAR,CAAiB,CAAjB,EAAoBiD,QAA3C,EAAoD,EAApD;AACH;AACJ,iBAPwC,CAOvCpD,IAPuC,CAOlC,IAPkC,CAD7C;AASH,aAbD,CAaE,OAAOlE,KAAP,EAAc;AACZC,wBAAQD,KAAR,mCAA8CA,MAAME,IAApD,WAA8DF,MAAMG,OAApE;AACH;AACJ,SA/VkD;;AAgWnD;AACAqH,2BAjWmD,iCAiW7B;AAClB,gBAAI;AACArJ,sBAAM,oDAAN,EACKsJ,EADL,CACQ,OADR,EACiB,UAASC,CAAT,EAAY;AACrB,wBAAM9F,SAASD,MAAMC,MAArB;AACA;AACA,wBAAIA,OAAOmF,QAAP,IAAmB,IAAvB,EAA6B;AACzB,6BAAKH,WAAL,CAAiBhF,MAAjB;AACA,6BAAKqF,qBAAL,CACIrF,OAAO+F,OAAP,CAAexC,QADnB,EAEIvD,OAAO+F,OAAP,CAAeT,OAFnB,EAGItF,MAHJ;AAKH;AACD;AACA,wBAAIA,OAAOmF,QAAP,IAAmB,KAAvB,EAA8B;AAC1B,6BAAKH,WAAL,CAAiBhF,OAAOiF,UAAxB;AACA,6BAAKI,qBAAL,CACIrF,OAAOiF,UAAP,CAAkBc,OAAlB,CAA0BxC,QAD9B,EAEIvD,OAAOiF,UAAP,CAAkBc,OAAlB,CAA0BT,OAF9B,EAGItF,OAAOiF,UAHX;AAKH;AACD;AACA,wBAAIjF,OAAOmF,QAAP,IAAmB,QAAvB,EAAiC;AAC7B,6BAAKH,WAAL,CAAiBhF,OAAOiF,UAAP,CAAkBA,UAAnC;AACA,6BAAKI,qBAAL,CACIrF,OAAOiF,UAAP,CAAkBA,UAAlB,CAA6Bc,OAA7B,CAAqCxC,QADzC,EAEIvD,OAAOiF,UAAP,CAAkBA,UAAlB,CAA6Bc,OAA7B,CAAqCT,OAFzC,EAGItF,OAAOiF,UAAP,CAAkBA,UAHtB;AAKH;AACJ,iBA7BY,CA6BX3C,IA7BW,CA6BN,IA7BM,CADjB;AA+BH,aAhCD,CAgCE,OAAOlE,KAAP,EAAc;AACZC,wBAAQD,KAAR,iCAA4CA,MAAME,IAAlD,WAA4DF,MAAMG,OAAlE;AACH;AACJ,SArYkD;;AAsYnD;AACAyH,qBAvYmD,2BAuYnC;AACZ,gBAAI;AACApJ,2BAAWqJ,WAAX,CAAuB,KAAKpH,GAA5B,EAAiC,KAAKA,GAAL,CAASqH,QAA1C,EACKC,IADL,CACUxJ,KAAKyJ,KAAL,CAAW,IAAX,EAAiB,UAASC,aAAT,EAAwB;AAAE,yBAAKpJ,SAAL,GAAiBoJ,aAAjB;AAAiC,iBAA5E,CADV;AAGH,aAJD,CAIE,OAAOjI,KAAP,EAAc;AACZC,wBAAQD,KAAR,2BAAsCA,MAAME,IAA5C,WAAsDF,MAAMG,OAA5D;AACH;AACJ,SA/YkD;;;AAiZnDsG,0BAAkB,0BAASyB,WAAT,EAAsB;AACpC,gBAAI;AACA,oBAAIC,QAAQrG,SAASsG,gBAAT,CAA0B,sCAA1B,CAAZ;AACA,oBAAIC,eAAevG,SAASsG,gBAAT,CAA0B,wCAA1B,CAAnB;;AAEA,oBAAIE,mBAAmB,SAAnBA,gBAAmB,GAAY;AAC/BH,0BAAMnG,OAAN,CAAc,UAAUuG,GAAV,EAAe;AAC7BA,4BAAIC,SAAJ,CAAcC,MAAd,CAAqB,qBAArB;AACC,qBAFD;AAGH,iBAJD;;AAMA,oBAAIC,kBAAkB,SAAlBA,eAAkB,GAAY;AAC9BL,iCAAarG,OAAb,CAAqB,UAAU2G,UAAV,EAAsB;AACvCA,mCAAWH,SAAX,CAAqBC,MAArB,CAA4B,qBAA5B;AACH,qBAFD;AAGH,iBAJD;;AAMA,oBAAIG,sBAAsB,SAAtBA,mBAAsB,CAAUL,GAAV,EAAe;AACrCF,iCAAaQ,SAASN,GAAT,CAAb,EAA4BC,SAA5B,CAAsCM,GAAtC,CAA0C,qBAA1C;AACH,iBAFD;;AAIA,oBAAID,WAAW,SAAXA,QAAW,CAAUE,EAAV,EAAc;AACzB,2BAAO,6BAAIA,GAAGC,aAAH,CAAiBC,QAArB,GAA+BC,OAA/B,CAAuCH,EAAvC,CAAP;AACH,iBAFD;;AAIAZ,sBAAMnG,OAAN,CAAc,UAAUmH,YAAV,EAAwBC,KAAxB,EAA+BC,KAA/B,EAAsC;AAChDF,iCAAaG,gBAAb,CAA8B,OAA9B,EAAuC,YAAY;AAC/ChB;AACAI;AACA;AACAS,qCAAaX,SAAb,CAAuBM,GAAvB,CAA2B,qBAA3B;AACAF,4CAAoBO,YAApB;AACA,6BAAKI,QAAL;AACH,qBAPsC,CAOrCrF,IAPqC,CAOhC,IAPgC,CAAvC;AAQH,iBATa,CASZA,IATY,CASP,IATO,CAAd;;AAWAiE,sBAAMD,WAAN,EAAmB1H,KAAnB;AACA;AACH,aArCD,CAqCE,OAAOR,KAAP,EAAc;AACdC,wBAAQ+G,GAAR,CAAY,6BAA6BhH,MAAME,IAAnC,GAA0C,KAA1C,GAAkDF,MAAMG,OAApE;AACD;AACJ,SA1bkD;AA2bnD;AACAqJ,oBAAY,sBAAW;AACnB,iBAAKC,SAAL,CAAeC,SAAf;AACA;AACA,iBAAKhK,gBAAL,GAAwB,KAAKiK,MAAL,CAAYjK,gBAApC;AACA,iBAAKH,YAAL,GAAoB,KAAKoK,MAAL,CAAYpK,YAAhC;AACA,iBAAKE,QAAL,GAAgB,KAAKkK,MAAL,CAAYC,aAA5B;AACA,iBAAK5F,kBAAL,CAAwBC,SAAxB,GAAoC,KAAKjF,cAAzC;AACA,iBAAK4B,eAAL,CAAqBf,KAArB,CAA2BC,OAA3B,GAAqC,MAArC;AACA,iBAAKe,SAAL,CAAe,GAAf,EAAoB,GAApB;AACA,iBAAK+G,aAAL;AACA3H,oBAAQ+G,GAAR,CAAY,qCAAZ;AACH,SAvckD;;AAycnD6C,iBAAS,mBAAW;AAChB,iBAAKrK,YAAL,GAAoB,IAApB;AACA,iBAAKiK,SAAL,CAAeC,SAAf;AACAzJ,oBAAQ+G,GAAR,CAAY,kCAAZ;AACA,iBAAK5E,iBAAL,CAAuBE,KAAvB;AACA,iBAAKkF,mBAAL;AACA;;;;;;;;;;;;AAYA;AACA,iBAAKf,gBAAL,CAAsB,CAAtB;AACH;;AAED;AACG;AACA;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAhgBmD,KAA9C,CAAP;AAogBD,CAzhBD","file":"Widget.js","sourcesContent":["define([\r\n    'dojo/query',\r\n    'dijit/_WidgetsInTemplateMixin',\r\n    'dijit/_TemplatedMixin',\r\n    'esri/tasks/query',\r\n    'dojo/_base/lang',\r\n    'jimu/LayerInfos/LayerInfos',\r\n    'dojo/_base/declare',\r\n    'jimu/dijit/Message',\r\n    'jimu/BaseWidget'],\r\nfunction(\r\n    query,\r\n    _WidgetsInTemplateMixin,\r\n    _TemplatedMixin,\r\n    Query,\r\n    lang,\r\n    LayerInfos,\r\n    declare,\r\n    Message,\r\n    BaseWidget) {\r\n    //To create a widget, you need to derive from BaseWidget.\r\n  return declare([BaseWidget,_WidgetsInTemplateMixin], {\r\n    // Custom widget code goes here\r\n    baseClass: 'widget-consulta-proyecto',\r\n    layersMap: null,\r\n    feature_class: null,\r\n    projectFilter: null,\r\n    // this property is set by the framework when widget is loaded.\r\n    // name: 'Widget-ConsultaProyecto',\r\n    // add additional properties here\r\n    counterFeature: 0,\r\n    counterTotal: 0,\r\n    counterItem: 0,\r\n    counterResults: 0,\r\n    stateExtent: [],\r\n    layerExtent: null,\r\n    listLayers: null,\r\n    idGroupLayer: null,\r\n    booleanField: true,\r\n    listName: null,\r\n    colorRowSelected: null,\r\n\r\n    _loadNoneGeneralLimite: function(){\r\n        try {\r\n            this.LoadGeneral.style.display = \"none\";\r\n            this.ID_General.style.display = \"block\";\r\n        } catch (error) {\r\n            console.error(`Error: _loadNoneGeneralLimite ${error.name} - ${error.message}`);\r\n        }\r\n    },\r\n    /* Contador de funciones asincronas en ejecución */\r\n    _counterFunction: function(paramNumber) {\r\n        try {\r\n            if(paramNumber != null) {\r\n                this.counterItem = this.counterItem + paramNumber;\r\n                if(this.counterItem == this.counterTotal) {    \r\n                    /* Acercamiento por centro del extent */\r\n                    if(this.layerExtent != null) {\r\n                        if(this.counterResults == 1) {\r\n                            //this.map.centerAndZoom(this.layerExtent.getCenter(),15);\r\n                            this.ID_ListProject.childNodes[0].click();\r\n                            //console.log(this.ID_ListProject.childNodes);\r\n                            \r\n                        } else {\r\n                            this.map.setExtent(this.layerExtent.expand(2),true);\r\n                        }\r\n                    } else {\r\n                        this.ID_LoadProyecto.style.display = \"none\";\r\n                    }\r\n                    /* Se reinicia el COUNTER y se limpia el EXTENT */\r\n                    this._counterFunction(null);\r\n                }\r\n            } else {\r\n                this.counterResults = 0;\r\n                this.counterItem = 0;\r\n                this.counterTotal = 0;\r\n                this.layerExtent = null;\r\n            }\r\n        } catch (error) {\r\n            console.error(`Error: _counterFunction ${error.name} - ${error.message}`);\r\n        }\r\n    },\r\n    /* Cambiar el tamaño del widget */\r\n    _getPanel: function(paramWidget, paramHeight) {  \r\n        let panel = null, pos = null;\r\n        try {\r\n            // paramWidget, paramHeight\r\n            panel = this.getPanel();\r\n            pos = panel.position;\r\n            panel.domNode.childNodes[1].childNodes[0].style.padding = \"0px\";\r\n            pos.width = paramWidget;\r\n            pos.height = paramHeight;\r\n            panel.setPosition(pos);\r\n        } catch (error) {\r\n            console.error(`_getPanel: ${error.name} - ${error.message}`);\r\n        }\r\n    },\r\n    /* Activación de las casillas de verificación */\r\n    _onClickCheckbox: function() {\r\n        let thisValue = \"\";\r\n        try {\r\n            thisValue = event.target;\r\n            let checkboxes = document.getElementsByName('check');\r\n            checkboxes.forEach((item) => {\r\n                if (item !== thisValue) item.checked = false\r\n            });\r\n            if(thisValue.id == \"PROYECTONOMBRE_ID\") {\r\n                this.ID_ProyectoFiltro.setAttribute(`placeholder`, `Ingrese NOMBRE del proyecto`);\r\n                this.projectFilter = true;\r\n            } else {\r\n                this.ID_ProyectoFiltro.setAttribute(`placeholder`, `Ingrese código SNIP del proyecto`);\r\n                this.projectFilter = false;\r\n            }\r\n            this.ID_ProyectoFiltro.focus();\r\n        } catch (error) {\r\n            console.error(`_onClickCheckbox: ${error.name} - ${error.message}`);\r\n        }\r\n    },\r\n    /* Buscar proyectos */\r\n    _searchProyectos: function(paramNameProject,paramProjectFilter) {\r\n        let listNameJSON = {}, query = null, layerMap = \"\", attObjectId = null, featureAttributes;\r\n        let featuresLength = null, feature = null, field = null, li = null, div = null;\r\n        try {\r\n            for(var k in this.listName) {\r\n                listNameJSON[this.listName[k]] = this.listName[k];\r\n            }\r\n            /* Visualiza las lista de capas. console.log(this.map.getLayersVisibleAtScale()); */\r\n            query = new Query();\r\n            layerMap = this.layersMap;\r\n            //this.listLayers = this.layersMap;\r\n            let featureLayerDecretoVisor = this.map.getLayer(this.idGroupLayer);\r\n            if (paramProjectFilter) {\r\n                query.where = `UPPER(nomproyct) like '%${paramNameProject.toUpperCase()}%'`;\r\n            } else {\r\n                query.where = `codsnip = ${paramNameProject} OR codunico = ${paramNameProject}` ;  \r\n            }\r\n\r\n            for(itemLayer in featureLayerDecretoVisor.layerInfos) {\r\n                let idLayer = `${this.idGroupLayer}_${itemLayer}`;\r\n                this.feature_class = layerMap.getLayerInfoById(`${this.idGroupLayer}_${itemLayer}`);\r\n                // Oculta capa\r\n                this.feature_class.hide();\r\n                this.counterFeature = 0;\r\n                // Valida si existe la función extent en consecuencia existe el objeto geográfico.\r\n                if(typeof this.feature_class.layerObject.queryExtent === 'function') {\r\n                    // Cuenta el resultado\r\n                    this.feature_class.layerObject.queryCount(query,function(queryResults) {\r\n                        this.counterResults = this.counterResults + queryResults;\r\n                        this.counterFeature = this.counterFeature + queryResults;\r\n                        this.ID_ProyectoCounter.innerHTML = this.counterFeature;\r\n                    }.bind(this), function(error) { console.error(error); });\r\n                    this.counterTotal++;\r\n                }                \r\n                // Valida si existe la función extent en consecuencia existe el objeto geográfico.\r\n                if(typeof this.feature_class.layerObject.queryExtent === 'function') {\r\n                    // Se oculta sus datos del mapa layerMap.getLayerInfoById(`${this.idGroupLayer}_${itemLayer}`).setFilter(\"1=2\");\r\n                    // Consulta de caracteristicas\r\n                    this.feature_class.layerObject.queryFeatures(query, function(results) {\r\n                        featuresLength = results.features.length;\r\n                        if(featuresLength >= 1) { \r\n                            feature = results.features;\r\n                            if(this.booleanField) {\r\n                                field = results.fields;\r\n                                for(let H = 0; H < field.length; H++) {\r\n                                    if(field[H].name in listNameJSON) {\r\n                                        //(field[H].name) field[H].alias);\r\n                                        listNameJSON[field[H].name] = field[H].alias;\r\n                                        window.listFiledJSON = listNameJSON;\r\n                                    }\r\n                                }\r\n                                this.booleanField = false;\r\n                            }\r\n\r\n                            for(let D = 0; D < featuresLength; D++) {\r\n                                let fragment = document.createDocumentFragment();\r\n                                featureAttributes = feature[D].attributes;\r\n                                li = document.createElement('li');\r\n                                attObjectId = document.createAttribute(\"data-objectid\");\r\n                                attObjectId.value = feature[D].attributes.objectid;\r\n                                attLayerId  = document.createAttribute(\"data-layerid\");\r\n                                attLayerId.value = idLayer;\r\n                                li.setAttributeNode(attObjectId);\r\n                                li.setAttributeNode(attLayerId);\r\n                                li.className = \"list-group-item\";                               \r\n                                for(let name in this.listName) {\r\n                                    div = document.createElement('div');\r\n                                    div.className = `field-${name}`;\r\n                                    div.innerHTML = `<strong style=\"text-transform: uppercase;\">${window.listFiledJSON[this.listName[name]]}: </strong> ${featureAttributes[this.listName[name]]}<br>`;\r\n                                   li.appendChild(div);\r\n                                }\r\n                                fragment.appendChild(li);\r\n                                this.ID_ListProject.appendChild(fragment);\r\n                            }\r\n                            layerMap.getLayerInfoById(results.features[0]._layer.id).setFilter(query.where);\r\n                            layerMap.getLayerInfoById(results.features[0]._layer.id).show();\r\n                            /* Se agreda al resultado */\r\n                            this.ID_LoadProyecto.style.display = \"none\";\r\n                        }\r\n                    }.bind(this));\r\n                    // Consulta de contador\r\n                    this.feature_class.layerObject.queryExtent(query,function(queryResults) {\r\n                        if(queryResults.count >= 1) {\r\n                            if(this.layerExtent == null) {\r\n                                this.layerExtent = queryResults.extent;\r\n                            } else {\r\n                                this.layerExtent.union(queryResults.extent);\r\n                            }                            \r\n                        }\r\n                        this._counterFunction(1);\r\n                    }.bind(this));\r\n                }\r\n            }\r\n            /*\r\n            this.feature_class = this.layersMap.getLayerInfoById('proyectos_decreto_visor_7498_3');\r\n            query = new Query();\r\n            query.where = \"codsnip = 2453194\";\r\n\r\n            this.feature_class.setFilter(query.where);\r\n\r\n            //this.feature_class.layerObject.queryCount(query,function(queryResults) {\r\n            //console.log(queryResults);\r\n            //}, function(error) {\r\n            //    console.log(error);\r\n            //});\r\n            \r\n            \r\n            // this.feature_class.layerObject.queryFeatures(query, function(results) {});\r\n            this.feature_class.layerObject.queryExtent(query, function(queryResults) {\r\n                console.log(queryResults);\r\n                //this.map.setExtent(queryResults.extent.expand(2),true);\r\n                //this.map.centerAndZoom(queryResults.extent.getCenter(),12);\r\n            }.bind(this));\r\n            */\r\n            \r\n            /*\r\n            console.log(this.map.getLayersVisibleAtScale());\r\n            let layerDefinitions = [];\r\n            layerDefinitions[3] = \"codsnip = 2453194\";\r\n            console.log(layerDefinitions);\r\n\r\n            let featureLayerDecretoVisor = this.map.getLayer('proyectos_decreto_visor_7498');\r\n            featureLayerDecretoVisor.setLayerDefinitions(layerDefinitions);\r\n\r\n            console.log(featureLayerDecretoVisor);\r\n            let soyapi = featureLayerDecretoVisor.layerInfos[3];\r\n\r\n            console.log(soyapi);*/\r\n            /*\r\n            let query = new Query();\r\n            query.where = featureLayerDecretoVisor.layerDefinitions[3];\r\n            //query.where = layerDefinitions;\r\n            //query.where = \"codsnip = 2453194\";\r\n            featureLayerDecretoVisor.queryCount(query,function(queryResults) {\r\n                console.log(queryResults);\r\n            }, function(error) {\r\n                console.log(error);\r\n            });\r\n            */\r\n        } catch (error) {\r\n            console.error(`_searchProyectos ${error.name} - ${error.message}`);\r\n        }\r\n    },\r\n\r\n    _isNumeric(value) {\r\n        return !isNaN(parseFloat(value)) && isFinite(value);\r\n    },\r\n\r\n    _onClickProyectoBuscar: function() {\r\n        let countCheckbox = 0, proyectoFiltro = \"\";\r\n        try {\r\n            proyectoFiltro = this.ID_ProyectoFiltro.value.trim();\r\n            // Se valida que el CHECKBOX este seleccionado\r\n            let checkboxes = document.getElementsByName('check');\r\n            checkboxes.forEach((item) => {\r\n                if(!item.checked) { countCheckbox = countCheckbox +1; }\r\n            });\r\n            // Se valida si selecciono la casilla de verificación\r\n            if(countCheckbox == 2) {\r\n                new Message({\r\n                    titleLabel: `<strong>\\\r\n                        <i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i>&nbsp;\\\r\n                        COMPLETAR CASILLA</strong>`,\r\n                    message: `<i class=\"fa fa-terminal\" aria-hidden=\"true\"></i>&nbsp;\\\r\n                        Código <strong>SNIP</strong> o <strong>NOMBRE</strong> del PROYECTO.`\r\n                });\r\n                countCheckbox = 0;\r\n                return;\r\n            }            \r\n            // Se valida que el campo no este vacío.\r\n            if(proyectoFiltro == \"\") {\r\n                new Message({\r\n                    titleLabel: `<strong>\\\r\n                        <i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i>&nbsp;\\\r\n                        COMPLETAR CAMPO</strong>`,\r\n                    message: `<i class=\"fa fa-terminal\" aria-hidden=\"true\"></i>&nbsp;\\\r\n                        ${this.ID_ProyectoFiltro.getAttribute(\"placeholder\")}.`\r\n                });\r\n                return;\r\n            }\r\n            // Verifica si es númerico\r\n            if(!this.projectFilter) {\r\n                // Tener en cuenta que el campo en la GDB es númerico. No se puede bandar vacío\r\n                proyectoFiltro = this._isNumeric(proyectoFiltro) ? proyectoFiltro: 0;\r\n            }            \r\n            // Muestra la segunda pestaña\r\n            this._activeTabSearch(1);\r\n            this.ID_LoadProyecto.style.display = \"block\";\r\n            // Limpia la lista de resultado\r\n            this.ID_ListProject.innerHTML = \"\";\r\n            // Proceso de búsqueda de proyectos\r\n            // projectFilter: true -> Buscar por nombre.\r\n            // projectFilter: false -> Buscar por snip.\r\n            this._searchProyectos(proyectoFiltro, this.projectFilter);\r\n        } catch (error) {\r\n            console.error(`Error: _onClickProyectoBuscar ${error.name} - ${error.message}`);\r\n        }\r\n    },\r\n\r\n    _onClickProyectoLimpiar: function() {\r\n        try {\r\n            this.ID_ProyectoFiltro.value = \"\";\r\n            this.ID_ListProject.innerHTML = \"\";\r\n            this.ID_ProyectoCounter.innerHTML = 0;\r\n            this.ID_ProyectoFiltro.focus();\r\n            /* Extensión por defecto del mapa */\r\n            this.map.setExtent(this.map._initialExtent);\r\n            /* Limpiando capas */\r\n            let featureLayerDecretoVisor = this.map.getLayer(this.idGroupLayer);\r\n            for(itemLayer in featureLayerDecretoVisor.layerInfos) {\r\n                this.feature_class = this.layersMap.getLayerInfoById(`${this.idGroupLayer}_${itemLayer}`);\r\n                this.feature_class.show();\r\n                // Valida si existe la función extent en consecuencia existe el objeto geográfico.\r\n                if(typeof this.feature_class.layerObject.queryExtent === 'function') {\r\n                    // Se filtra    \r\n                    this.layersMap.getLayerInfoById(`${this.idGroupLayer}_${itemLayer}`).setFilter(\"1=1\");\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(`Error: _onClickProyectoLimpiar ${error.name} - ${error.message}`);\r\n        }\r\n    },\r\n    _clearNodes: function(item) {\r\n        try {\r\n            item = item.parentNode.childNodes;\r\n            for(let i = 0; i<item.length; i++) {\r\n                if(item[i].nodeName == \"LI\") {\r\n                item[i].style[\"background-color\"] = \"#FFFFFF\";\r\n                }          \r\n            }\r\n        } catch (error) {\r\n          console.log(`Error: _clearNodes ${error.name} - ${error.message}`);\r\n        }\r\n      },\r\n    // Muestra el popup\r\n    _queryResultsFeatures(objectid, layerid, target) {\r\n        let queryProject = null;\r\n        try {\r\n            target.style[\"background-color\"] = this.colorRowSelected;\r\n            queryProject = new Query();\r\n            queryProject.where = `objectid = ${objectid}`;\r\n            this.layersMap.getLayerInfoById(layerid)\r\n                .layerObject.queryFeatures(queryProject, function(results) {\r\n                    featuresLength = results.features.length;\r\n                    if(featuresLength >= 1) {\r\n                        this.map.infoWindow.setFeatures(results.features);\r\n                        this.map.infoWindow.show(results.features[0].geometry);\r\n                        this.map.centerAndZoom(results.features[0].geometry,16);\r\n                    }\r\n                }.bind(this));\r\n        } catch (error) {\r\n            console.error(`Error: _queryResultsFeatures ${error.name} - ${error.message}`);\r\n        }\r\n    },\r\n    // Seleccionar la fila de resultado\r\n    _onclickRowSelected() {\r\n        try {\r\n            query(\".widget-consulta-proyecto .tab-content .list-group\")\r\n                .on(\"click\", function(e) {\r\n                    const target = event.target;\r\n                    // Tag LI\r\n                    if (target.nodeName == \"LI\") {\r\n                        this._clearNodes(target);\r\n                        this._queryResultsFeatures(\r\n                            target.dataset.objectid,\r\n                            target.dataset.layerid,\r\n                            target\r\n                        );\r\n                    }\r\n                    // Tag DIV\r\n                    if (target.nodeName == \"DIV\") {\r\n                        this._clearNodes(target.parentNode);\r\n                        this._queryResultsFeatures(\r\n                            target.parentNode.dataset.objectid,\r\n                            target.parentNode.dataset.layerid,\r\n                            target.parentNode\r\n                        );\r\n                    }\r\n                    // Tag STRONG\r\n                    if (target.nodeName == \"STRONG\") {\r\n                        this._clearNodes(target.parentNode.parentNode);\r\n                        this._queryResultsFeatures(\r\n                            target.parentNode.parentNode.dataset.objectid,\r\n                            target.parentNode.parentNode.dataset.layerid,\r\n                            target.parentNode.parentNode\r\n                        );\r\n                    }\r\n                }.bind(this));\r\n        } catch (error) {\r\n            console.error(`Error: _onclickRowSelected ${error.name} - ${error.message}`);\r\n        }\r\n    },\r\n    // Lista de capas\r\n    _getAllLayers() {\r\n        try {\r\n            LayerInfos.getInstance(this.map, this.map.itemInfo)\r\n                .then(lang.hitch(this, function(layerInfosObj) { this.layersMap = layerInfosObj; })\r\n            );\r\n        } catch (error) {\r\n            console.error(`Error: _getAllLayers ${error.name} - ${error.message}`);\r\n        }\r\n    },\r\n\r\n    _activeTabSearch: function(positionTab) {\r\n        try {\r\n            let tabs4 = document.querySelectorAll('.widget-consulta-proyecto .tabs .tab');\r\n            let tabsContent4 = document.querySelectorAll('.widget-consulta-proyecto .tab-content');\r\n  \r\n            let deactvateAllTabs = function () {\r\n                tabs4.forEach(function (tab) {\r\n                tab.classList.remove('jimu-state-selected');\r\n                });\r\n            };\r\n  \r\n            let hideTabsContent = function () {\r\n                tabsContent4.forEach(function (tabContent) {\r\n                    tabContent.classList.remove('jimu-state-selected');\r\n                });\r\n            };\r\n  \r\n            let activateTabsContent = function (tab) {\r\n                tabsContent4[getIndex(tab)].classList.add('jimu-state-selected');\r\n            };\r\n  \r\n            let getIndex = function (el) {\r\n                return [...el.parentElement.children].indexOf(el);\r\n            };\r\n  \r\n            tabs4.forEach(function (currentValue, index, array) {\r\n                currentValue.addEventListener('click', function () {\r\n                    deactvateAllTabs();\r\n                    hideTabsContent();\r\n                    /* Limpia la funcionalidad */\r\n                    currentValue.classList.add('jimu-state-selected');\r\n                    activateTabsContent(currentValue);\r\n                    this._onFocus();\r\n                }.bind(this));\r\n            }.bind(this));\r\n\r\n            tabs4[positionTab].click();\r\n            //if(positionTab){ this._onFocus(); }\r\n        } catch (error) {\r\n          console.log(\"Error: _activeTabSearch \" + error.name + \" - \" + error.message);\r\n        }\r\n    },\r\n    //methods to communication with app container:\r\n    postCreate: function() {\r\n        this.inherited(arguments);\r\n        /* Cambiar el tamaño del widget */\r\n        this.colorRowSelected = this.config.colorRowSelected;\r\n        this.idGroupLayer = this.config.idGroupLayer;\r\n        this.listName = this.config.listNameField;\r\n        this.ID_ProyectoCounter.innerHTML = this.counterFeature;\r\n        this.ID_LoadProyecto.style.display = \"none\";\r\n        this._getPanel(300, 450);\r\n        this._getAllLayers();\r\n        console.log('Widget-ConsultaProyecto::postCreate');\r\n    },\r\n\r\n    startup: function() {\r\n        this.booleanField = true;\r\n        this.inherited(arguments);\r\n        console.log('Widget-ConsultaProyecto::startup');\r\n        this.ID_ProyectoFiltro.focus();\r\n        this._onclickRowSelected();\r\n        /* PRUEBA DE PINTAR SEGÚN LA COINCIDENCIA DEL TEXTO\r\n        let p = 'The quick brown Daniel Ramos fox jumps over the lazy dog. If the dog reacted, was it really Daniel Ramos lazy?';\r\n        console.log(p);\r\n        const regex = /Daniel Ramos/gi;\r\n        //p = p.replace(regex, 'ferret');\r\n        p = p.replace(regex, 'PAPI JUANCHO');\r\n        console.log(p);\r\n        // expected output: \"The quick brown fox jumps over the lazy ferret. If the ferret reacted, was it really lazy?\"\r\n        p = p.replace('dog', 'monkey');\r\n        console.log(p);\r\n        */\r\n\r\n        /* Pestaña que se activa: 0 FILTRO || 1. RESULTADO */\r\n        this._activeTabSearch(0);\r\n    },\r\n\r\n    //onOpen: function(){\r\n       //console.log('Widget-ConsultaProyecto::onOpen');\r\n       //this.ID_ProyectoFiltro.focus();\r\n    //},\r\n\r\n    // onClose: function(){\r\n    //   console.log('Widget-ConsultaProyecto::onClose');\r\n    // },\r\n\r\n    // onMinimize: function(){\r\n    //   console.log('Widget-ConsultaProyecto::onMinimize');\r\n    // },\r\n\r\n    // onMaximize: function(){\r\n    //   console.log('Widget-ConsultaProyecto::onMaximize');\r\n    // },\r\n\r\n    // onSignIn: function(credential){\r\n    //   console.log('Widget-ConsultaProyecto::onSignIn', credential);\r\n    // },\r\n\r\n    // onSignOut: function(){\r\n    //   console.log('Widget-ConsultaProyecto::onSignOut');\r\n    // }\r\n\r\n    // onPositionChange: function(){\r\n    //   console.log('Widget-ConsultaProyecto::onPositionChange');\r\n    // },\r\n\r\n    // resize: function(){\r\n    //   console.log('Widget-ConsultaProyecto::resize');\r\n    // }\r\n\r\n    //methods to communication between widgets:\r\n\r\n  });\r\n\r\n});\r\n"]}